import{f as B,u as E,j as t,W as Q}from"./app-CFTk7BEx.js";import{c as X,u as F,A as Z,S as A,i as ee,B as M,a as Y,F as ae}from"./AppLayout-CejtzFn7.js";import{T as te}from"./Title-j1jl8GIj.js";import{G as N}from"./Grid-D5R2Hi2Y.js";import{F as re}from"./FileButton-C00BVoav.js";import{T as m}from"./TextInput-GVWzMzKH.js";import{I as se,a as oe}from"./IconPhone-HuSiAQqN.js";import{u as ne,a as O,C as U,s as V,b as ie,P as W,g as z,p as le,I as ue}from"./use-dates-input-C4Pysiwg.js";import{I as de}from"./IconMail-D3vPk693.js";import{I as he}from"./IconPassword-CkiwsNnC.js";import{S as me}from"./Select-CROw5Cs-.js";import"./get-base-value-s876NBA_.js";import"./InputBase-du6BQMD8.js";import"./Input-C8Ee38su.js";import"./clamp-DTmYCdls.js";import"./CheckIcon-B2CJtak5.js";import"./ScrollArea-DnRqSfHq.js";/**
 * @license @tabler/icons-react v3.6.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=X("outline","photo-up","IconPhotoUp",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526",key:"svg-3"}],["path",{d:"M19 22v-6",key:"svg-4"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-5"}]]);const ce={type:"default"},y=B((r,e)=>{const s=E("YearPicker",ce,r),{classNames:a,styles:x,vars:L,type:j,defaultValue:S,value:C,onChange:g,__staticSelector:w,getYearControlProps:l,allowSingleDateInRange:c,allowDeselect:I,onMouseLeave:p,onYearSelect:n,__updateDateOnYearSelect:f,__timezoneApplied:v,...i}=s,{onDateChange:u,onRootMouseLeave:T,onHoveredDateChange:D,getControlProps:P}=ne({type:j,level:"year",allowDeselect:I,allowSingleDateInRange:c,value:C,defaultValue:S,onChange:g,onMouseLeave:p,applyTimezone:!v}),{resolvedClassNames:b,resolvedStyles:_}=F({classNames:a,styles:x,props:s}),k=O();return t.jsx(U,{ref:e,minLevel:"decade",__updateDateOnYearSelect:f??!1,__staticSelector:w||"YearPicker",onMouseLeave:T,onYearMouseEnter:(o,d)=>D(d),onYearSelect:o=>{u(o),n==null||n(o)},getYearControlProps:o=>({...P(o),...l==null?void 0:l(o)}),classNames:b,styles:_,...i,date:V("add",i.date,k.getTimezone(),v),__timezoneApplied:!0})});y.classes=U.classes;y.displayName="@mantine/dates/YearPicker";const pe={type:"default",valueFormat:"YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},R=B((r,e)=>{const s=E("YearPickerInput",pe,r),{type:a,value:x,defaultValue:L,onChange:j,valueFormat:S,labelSeparator:C,locale:g,classNames:w,styles:l,unstyled:c,closeOnChange:I,size:p,variant:n,dropdownType:f,sortDates:v,minDate:i,maxDate:u,vars:T,valueFormatter:D,...P}=s,{resolvedClassNames:b,resolvedStyles:_}=F({classNames:w,styles:l,props:s}),{calendarProps:k,others:o}=le(P),d=O(),{_value:h,setValue:$,formattedValue:G,dropdownHandlers:H,dropdownOpened:K,onClear:q,shouldClear:J}=ie({type:a,value:x,defaultValue:L,onChange:j,locale:g,format:S,labelSeparator:C,closeOnChange:I,sortDates:v,valueFormatter:D});return t.jsx(W,{formattedValue:G,dropdownOpened:K,dropdownHandlers:H,classNames:b,styles:_,unstyled:c,ref:e,onClear:q,shouldClear:J,value:h,size:p,variant:n,dropdownType:f,...o,type:a,__staticSelector:"YearPickerInput",children:t.jsx(y,{...k,size:p,variant:n,type:a,value:h,defaultDate:Array.isArray(h)?h[0]||z({maxDate:u,minDate:i,timezone:d.getTimezone()}):h||z({maxDate:u,minDate:i,timezone:d.getTimezone()}),onChange:$,locale:g,classNames:b,styles:_,unstyled:c,__staticSelector:"YearPickerInput",__stopPropagation:f==="popover",minDate:i,maxDate:u,date:V("add",k.date,d.getTimezone()),__timezoneApplied:!0})})});R.classes={...W.classes,...y.classes};R.displayName="@mantine/dates/YearPickerInput";const Le=r=>{var s;const e=Q({_method:"put",avatar:r.auth.user.avatar||null,full_name:r.auth.user.full_name,id_number:r.auth.user.id_number,phone_number:r.auth.user.phone_number,academic_year:r.auth.user.role==="Mahasiswa"?r.auth.user.student.academic_year:null,email:r.auth.user.email,password:"",supervisor_id:(s=r.auth.user.student)==null?void 0:s.supervisor_id});return t.jsx("form",{onSubmit:a=>{a.preventDefault(),e.post(route("profile.update",r.auth.user))},children:t.jsxs(Z,{title:"Profil",activeNav:"Profil",authed:r.auth.user,meta:r.meta,children:[t.jsxs(te,{align:"center",order:3,mb:32,children:["Profil"," "," ",r.auth.user.role==="Admin"?"Kaprodi":r.auth.user.role]}),t.jsxs(N,{grow:!0,mx:160,children:[t.jsx(N.Col,{span:6,children:t.jsxs(A,{children:[t.jsx(ee,{mx:"auto",src:e.data.avatar instanceof File?URL.createObjectURL(e.data.avatar):e.data.avatar,alt:e.data.full_name,size:160}),t.jsx(re,{onChange:a=>e.setData("avatar",a),accept:"image/png,image/jpeg,image/jpg",children:a=>t.jsx(M,{px:16,styles:{section:{marginRight:12}},variant:"subtle",...a,color:"gold.2",h:48,radius:32,fullWidth:!0,leftSection:t.jsx(ge,{}),children:"Unggah Foto"})})]})}),t.jsx(N.Col,{span:6,children:t.jsxs(A,{children:[t.jsx(m,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(Y,{}),withAsterisk:!0,label:"Nama Lengkap",placeholder:"Masukkan nama lengkap...",mb:16,value:e.data.full_name,onChange:a=>e.setData("full_name",a.target.value)}),t.jsx(m,{type:"number",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(se,{}),withAsterisk:!0,label:r.auth.user.role==="Mahasiswa"?"NIM":"NIDN",disabled:!0,value:e.data.id_number,hideControls:!0,placeholder:`Masukkan ${r.auth.user.role==="Mahasiswa"?"NIM":"NIDN"}`,onChange:a=>{e.setData("id_number",a.target.value.toString()),a.target.value?e.clearErrors("id_number"):e.setError({id_number:`${r.auth.user.role==="Mahasiswa"?"NIM":"NIDN"} tidak boleh kosong.`}),a.target.value.toString().length<10||a.target.value.toString().length>10?e.setError({id_number:`${r.auth.user.role==="Mahasiswa"?"NIM":"NIDN"} harus 10 digit.`}):e.clearErrors("id_number")}}),r.auth.user.role==="Mahasiswa"&&t.jsx(R,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(ue,{}),withAsterisk:!0,disabled:!0,value:new Date(e.data.academic_year),label:"Tahun Angkatan",placeholder:"Masukkan tahun angkatan...",onChange:a=>e.setData("academic_year",a.getFullYear().toString())}),t.jsx(m,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(de,{}),withAsterisk:!0,type:"email",value:e.data.email,label:"Email",placeholder:"Masukkan email...",onChange:a=>e.setData("email",a.target.value.toLowerCase())}),t.jsx(m,{type:"number",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(oe,{}),withAsterisk:!0,label:"Nomor Telepon",value:e.data.phone_number,hideControls:!0,placeholder:"Masukkan nomor telepon...",onChange:a=>{e.setData("phone_number",a.target.value.toString()),a.target.value?e.clearErrors("phone_number"):e.setError({phone_number:"Nomor telepon tidak boleh kosong."}),a.target.value.toString().length<10||a.target.value.toString().length>13?e.setError({phone_number:"Nomor telepon harus 10-13 digit."}):e.clearErrors("phone_number")}}),t.jsx(m,{type:"password",styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(he,{}),label:"Kata Sandi",placeholder:"Masukkan kata sandi...",onChange:a=>e.setData("password",a.target.value)}),e.data.supervisor_id&&t.jsx(me,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:t.jsx(Y,{}),disabled:!0,label:"Dosen Pembimbing Akademik",value:e.data.supervisor_id,searchable:!0,checkIconPosition:"right",data:r.lecturers.map(a=>({label:a.user.full_name,value:a.user.id}))})]})})]}),t.jsxs(ae,{mt:32,gap:16,children:[t.jsx(M,{px:16,h:48,color:"red",variant:"outline",radius:32,styles:{section:{marginRight:16}},fullWidth:!0,loading:e.processing,onClick:()=>history.back(),children:"Batal"}),t.jsx(M,{px:16,h:48,radius:32,variant:"outline",styles:{section:{marginRight:16}},fullWidth:!0,loading:e.processing,type:"submit",children:"Simpan"})]})]})})};export{Le as default};
