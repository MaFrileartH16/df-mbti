import{r as c,j as a,F as t,B as w}from"./app-CCboV3SP.js";import{A as T,S as f,a as S,T as p,B as o,i as k,F as C}from"./AppLayout-cfYDttSl.js";import{G as l}from"./Grid-BUoyOZe3.js";import{S as u}from"./Select-CevkZdF3.js";import{I as v}from"./IconCalendar-rWkZyNc1.js";import{T as _}from"./TextInput-ay67kmjZ.js";import{I as A}from"./IconSearch-DHWxYALG.js";import{I}from"./IconPlus-C3uI0nOB.js";import{T as i}from"./Table-BfxcRzZ8.js";import{C as L}from"./Checkbox-BBpSySOX.js";import"./get-base-value-CnLxV4bD.js";import"./Input-pW-xxAEB.js";import"./CheckIcon-Czz48l7q.js";import"./ScrollArea-OpRNetTp.js";import"./InputBase-_-QgWSU9.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./InputsGroupFieldset-D5RJPj_S.js";const J=r=>{const[n,x]=c.useState(""),[d,g]=c.useState(""),[h,j]=c.useState(r.auth.user.role==="Dosen PA"?r.auth.user.id:"");console.log(r);const b=r.students.filter(e=>(!n||e.user.full_name.toLowerCase().includes(n.toLowerCase()))&&(!d||e.academic_year===d)&&(!h||e.supervisor_id===h)),y=r.auth.user.role==="Admin"?["#","Foto","NIM","Nama Lengkap","Tahun Angkatan","Email","Nomor Telepon","DPA","Aktif","Opsi"]:["#","Foto","NIM","Nama Lengkap","Tahun Angkatan","Tipe Kepribadian","Aktif","Opsi"];return a.jsx(T,{title:"Mahasiswa",activeNav:"Mahasiswa",authed:r.auth.user,meta:r.meta,children:a.jsxs(f,{gap:32,children:[a.jsxs(l,{grow:!0,children:[a.jsx(l.Col,{span:{base:6,sm:3},children:a.jsx(u,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:a.jsx(S,{}),clearable:!0,searchable:!0,value:h,disabled:r.auth.user.role==="Dosen PA",nothingFoundMessage:"Tidak ada dosen pembimbing",checkIconPosition:"right",placeholder:"Dosen Pembimbing",data:r.lecturers.map(e=>({label:e.user.full_name,value:e.user.id})).sort((e,s)=>e.label.localeCompare(s.label)),onChange:e=>j(e)})}),a.jsx(l.Col,{span:{base:6,sm:3},children:a.jsx(u,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:a.jsx(v,{}),clearable:!0,searchable:!0,placeholder:"Tahun Angkatan",checkIconPosition:"right",nothingFoundMessage:"Tidak ada tahun ajaran",data:r.auth.user.role==="Admin"?[...new Set(r.students.map(e=>e.academic_year))].sort((e,s)=>s-e):[...new Set(r.students.filter(e=>e.supervisor_id===r.auth.user.id).map(e=>e.academic_year))].sort((e,s)=>s-e),onChange:e=>g(e)})}),a.jsx(l.Col,{span:{base:6,sm:3},children:a.jsx(_,{styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:a.jsx(A,{}),placeholder:"Cari mahasiswa...",value:n,onChange:e=>x(e.currentTarget.value)})}),r.auth.user.role==="Admin"&&a.jsx(l.Col,{span:{base:6,sm:3},children:a.jsx(p,{disabled:!!r.lecturers.length,label:!r.lecturers.length&&"Harap isi data dosen dahulu!",children:a.jsx(o,{px:16,styles:{section:{marginRight:12}},radius:32,h:48,fullWidth:!0,disabled:!r.lecturers.length,leftSection:a.jsx(I,{}),onClick:()=>t.get(route("students.create")),children:"Tambah Mahasiswa"})})})]}),a.jsx(w,{style:{borderRadius:32,border:"1px solid #E9ECEF"},children:a.jsx(i.ScrollContainer,{children:a.jsxs(i,{highlightOnHover:!0,withColumnBorders:!0,children:[a.jsx(i.Thead,{h:64,children:a.jsx(i.Tr,{children:y.map((e,s)=>a.jsx(i.Th,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e},s))})}),a.jsx(i.Tbody,{children:b.map((e,s)=>{var m;return a.jsxs(i.Tr,{h:64,children:[a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:s+1}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:a.jsx(k,{src:e.user.avatar,alt:e.user.full_name})}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.user.id_number}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.user.full_name}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.user.id_number.substring(0,4)}),r.auth.user.role==="Admin"&&a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.user.email}),r.auth.user.role==="Admin"?a.jsxs(a.Fragment,{children:[a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e.user.phone_number}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:(m=e==null?void 0:e.supervisor)==null?void 0:m.user.full_name})]}):a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:e!=null&&e.tests.length?e==null?void 0:e.tests[0].personality:"-"}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:a.jsx(L,{checked:e.user.is_actived,onClick:()=>t.put(route("students.is_actived",e.user_id))})}),a.jsx(i.Td,{px:16,py:0,style:{whiteSpace:"nowrap"},children:r.auth.user.role==="Admin"?a.jsxs(C,{gap:16,children:[a.jsx(o,{px:16,h:48,radius:32,styles:{section:{marginRight:16}},variant:"outline",color:"yellow",onClick:()=>t.get(route("students.edit",e.user_id)),children:"Ubah"}),a.jsx(o,{px:16,h:48,radius:32,styles:{section:{marginRight:16}},variant:"outline",color:"red",onClick:()=>t.delete(route("students.destroy",e.user_id)),children:"Hapus"})]}):a.jsx(p,{label:!(e!=null&&e.tests.length)&&"Mahasiswa belum melakukan tes kepribadian!",children:a.jsx(o,{disabled:!(e!=null&&e.tests.length),px:16,h:48,radius:32,styles:{section:{marginRight:16}},variant:"outline",color:"yellow",onClick:()=>t.get(route("students.tests.index",e.user_id)),children:"Detail"})})})]},s)})})]})})})]})})};export{J as default};
