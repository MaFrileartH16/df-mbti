import{r as k,W as R,j as e,B as p,F as A}from"./app-BlHk73oM.js";import{A as H,S as y,f,g as G,F as C,B as _}from"./AppLayout-WBqxd60u.js";import{R as s,u as T,S as v,L as S,P as w}from"./index-BjsLNNGn.js";import{T as L}from"./Title-BZ_WjV45.js";import{G as h}from"./Grid-wu4e7BCB.js";import{T as D}from"./TextInput-J41YNSPD.js";import{S as U}from"./SimpleGrid-KlJRjV49.js";import{C as F}from"./Checkbox-B0PEJ9SN.js";import{N as B}from"./NumberInput-DayWaLLU.js";import{I as E,a as I}from"./IconCaretUp-D6l3CwkY.js";import"./ColorSwatch-C36NQUhF.js";import"./Input-0cUJCdLj.js";import"./clamp-DTmYCdls.js";import"./get-base-value-D0odLtDU.js";import"./InputBase-a8us70hv.js";import"./get-auto-contrast-value-Da6zqqWm.js";import"./InputsGroupFieldset-Htnx6nye.js";import"./CheckIcon-DXC1eKzS.js";const ie=n=>{console.log(n,"props");const[m,u]=k.useState([]),a=R({name:n.work.name,detail:n.work.detail,basic_traits:[],course:n.work.course});return console.log(a.data,"form.data"),console.log(m,"basicTraits"),k.useEffect(()=>{const j=n.basic_traits.slice(0,8).map((t,g)=>{const i=n.work_basic_traits.find(x=>x.id===t.id),r=!!i;return{id:t.id,code:t.code,selected:r,min_value:r?i.min_value:10,max_value:r?i.max_value:50,order:Math.floor(g/2)+1}}).reduce((t,g,i,r)=>(i%2===0&&t.push(r.slice(i,i+2)),t),[]);u(j)},[n.basic_traits,n.works_basic_traits]),k.useEffect(()=>{a.setData("basic_traits",n.work_basic_traits)},[n.work_basic_traits]),e.jsx("form",{onSubmit:o=>{o.preventDefault(),a.put(route("works.update",n.work.id))},children:e.jsx(H,{title:"Tambah Pekerjaan",activeNav:"Pekerjaan",authed:n.auth.user,meta:n.meta,children:e.jsxs(y,{px:160,children:[e.jsx(L,{align:"center",mb:32,children:"Ubah Data Pekerjaan"}),e.jsxs(p,{mb:32,children:[e.jsx(L,{order:6,mb:8,children:"Keterangan Nama Tipe Kepribadian:"}),e.jsx(h,{grow:!0,cols:n.basic_traits.length,children:n.basic_traits.map(o=>e.jsx(h.Col,{children:e.jsxs(f,{children:[o.code," - ",o.name]})},o.id))})]}),e.jsx(D,{mb:16,leftSection:e.jsx(G,{}),styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},withAsterisk:!0,label:"Pekerjaan",placeholder:"Masukkan pekerjaan...",value:a.data.name,onChange:o=>a.setData("name",o.target.value)}),e.jsxs(p,{children:[e.jsx(f,{fz:14,children:"Rincian Pekerjaan"}),e.jsxs(s,{mb:8,styles:{content:{border:"1px solid #dcdcdc"}},editor:T({extensions:[v,S,w.configure({placeholder:"Masukkan detail..."})],content:a.data.detail,onUpdate:({editor:o})=>{a.setData("detail",o.getHTML())}}),children:[e.jsxs(s.Toolbar,{children:[e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Bold,{}),e.jsx(s.Italic,{}),e.jsx(s.Underline,{}),e.jsx(s.Strikethrough,{}),e.jsx(s.ClearFormatting,{}),e.jsx(s.Highlight,{}),e.jsx(s.Code,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.H1,{}),e.jsx(s.H2,{}),e.jsx(s.H3,{}),e.jsx(s.H4,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Blockquote,{}),e.jsx(s.Hr,{}),e.jsx(s.BulletList,{}),e.jsx(s.OrderedList,{}),e.jsx(s.Subscript,{}),e.jsx(s.Superscript,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Link,{}),e.jsx(s.Unlink,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.AlignLeft,{}),e.jsx(s.AlignCenter,{}),e.jsx(s.AlignJustify,{}),e.jsx(s.AlignRight,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Undo,{}),e.jsx(s.Redo,{})]})]}),e.jsx(s.Content,{})]})]}),e.jsxs(p,{children:[e.jsx(f,{fz:14,mb:8,children:"Mata Kuliah Relevan"}),e.jsxs(s,{styles:{content:{border:"1px solid #dcdcdc"}},editor:T({extensions:[v,S,w.configure({placeholder:"Masukkan mata kuliah relevan..."})],content:a.data.course,onUpdate:({editor:o})=>{a.setData("course",o.getHTML())}}),children:[e.jsxs(s.Toolbar,{children:[e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Bold,{}),e.jsx(s.Italic,{}),e.jsx(s.Underline,{}),e.jsx(s.Strikethrough,{}),e.jsx(s.ClearFormatting,{}),e.jsx(s.Highlight,{}),e.jsx(s.Code,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.H1,{}),e.jsx(s.H2,{}),e.jsx(s.H3,{}),e.jsx(s.H4,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Blockquote,{}),e.jsx(s.Hr,{}),e.jsx(s.BulletList,{}),e.jsx(s.OrderedList,{}),e.jsx(s.Subscript,{}),e.jsx(s.Superscript,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Link,{}),e.jsx(s.Unlink,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.AlignLeft,{}),e.jsx(s.AlignCenter,{}),e.jsx(s.AlignJustify,{}),e.jsx(s.AlignRight,{})]}),e.jsxs(s.ControlsGroup,{children:[e.jsx(s.Undo,{}),e.jsx(s.Redo,{})]})]}),e.jsx(s.Content,{})]})]}),e.jsxs(p,{children:[e.jsx(f,{fz:14,mb:8,children:"Tipe Kepribadian"}),m.map((o,j)=>e.jsx(U,{cols:2,mb:16,spacing:32,children:o.map(t=>{const g=a.data.basic_traits.some(i=>i.order===t.order&&i.selected);return e.jsxs(h,{gutter:0,grow:!0,children:[e.jsx(h.Col,{span:1,children:e.jsx(C,{align:"center",h:"100%",children:e.jsx(F,{disabled:g&&!t.selected||!t.selected&&o.some(i=>i.selected),checked:t.selected,onChange:i=>{let r=[...a.data.basic_traits];const x=r.findIndex(l=>l.code===t.code);i.target.checked?x===-1?r.push({...t,selected:i.target.checked}):r[x]={...r[x],selected:i.target.checked}:r=r.filter(l=>l.code!==t.code),r.sort((l,c)=>l.order-c.order),a.setData("basic_traits",r);const d=m.map((l,c)=>c===j?l.map(b=>b.code===t.code?{...b,selected:i.target.checked}:b):l);u(d)},label:t.code})})}),e.jsx(h.Col,{span:10,children:e.jsxs(C,{gap:16,children:[e.jsx(B,{disabled:!t.selected,styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:e.jsx(E,{}),withAsterisk:!0,placeholder:`${t.min_value}%`,min:10,max:50,value:t.min_value,suffix:"%",onChange:i=>{const r=m.map((d,l)=>l===j?d.map(c=>c.code===t.code?{...c,min_value:i}:c):d);u(r);const x=a.data.basic_traits.map(d=>d.code===t.code?{...d,min_value:i}:d);a.setData("basic_traits",x)}}),e.jsx(B,{disabled:!t.selected,styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}},leftSection:e.jsx(I,{}),withAsterisk:!0,placeholder:`${t.max_value}%`,min:10,max:50,value:t.max_value,suffix:"%",onChange:i=>{const r=m.map((d,l)=>l===j?d.map(c=>c.code===t.code?{...c,max_value:i}:c):d);u(r);const x=a.data.basic_traits.map(d=>d.code===t.code?{...d,max_value:i}:d);a.setData("basic_traits",x)}})]})})]},t.id)})},j))]}),e.jsxs(C,{mt:24,gap:16,children:[e.jsx(_,{h:48,px:16,styles:{section:{marginRight:12}},radius:32,variant:"outline",color:"red",disabled:a.processing,fullWidth:!0,onClick:()=>A.get(route("works.index")),children:"Batal"}),e.jsx(_,{h:48,px:16,styles:{section:{marginRight:12}},radius:32,fullWidth:!0,loading:a.processing,type:"submit",children:"Simpan"})]})]})})})};export{ie as default};
